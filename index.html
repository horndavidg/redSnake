<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet" type="text/css" href="style.css">
<!-- Load the Paper.js library -->
<script type="text/javascript" src="paperjs/docs/assets/js/paper.js"></script>
<!-- Define inlined PaperScript associate it with myCanvas -->
<script type="text/paperscript" canvas="myCanvas">
	
var textItem = new PointText({
	content: 'Move me around and click, see what happens!',
	point: new Point(20, 20),
	fillColor: 'black',
});
// add text to the canvas.....

tool.maxDistance = 40;

var points = 22;
// The amount of points in the path:

var length = 14;
// The distance between the points:

var path = new Path({
	strokeColor: '#FF3939',
	strokeWidth: 10,
	strokeCap: 'round'
});
// describes what the path is going to look like (its attributes)


var start = view.center // [10, 1];
for (var i = 0; i < points; i++)
	path.add(start + new Point(i * length, 0));
// populates the path segments based on a starting point in the middle of the 
// page and adds segments on to fill the # of points listed above. Also takes
// into account the length between points (set by the length var) and creates
// path along the X axis.

function onMouseMove(event) {
	path.firstSegment.point = event.point;
	// makes the point of the mouse movement the first point in the path
	for (var i = 0; i < points - 1; i++) {
		// creates the path around the first segment (hence points -1)
		var segment = path.segments[i];
		// selects the first segment in the path created above
		var nextSegment = segment.next;
		// selects the segment next to the one selected above
		var vector = segment.point - nextSegment.point;
		vector.length = length;
		nextSegment.point = segment.point - vector;
		// because the length is consistent (set to variable length)
		// the only thing that changes is the direction of the path
		// in relation to the mouse point and the vectors of each point
		// in the path are changed accordingly as the mouse moves. 

		// use of the for loop and the segment.next method make this possible.

			}
					var width = event.delta;
	 				// sets the variable width to the vector
					path.strokeWidth = width.length + 4;
					// sets the path strokeWidth equal to the vector


	path.smooth();
	// smooths/optimizes out the path segments
}

function onMouseDown(event) {
	path.fullySelected = true;
	path.strokeColor = '#'+Math.floor(Math.random()*16777215).toString(16);
}

function onMouseUp(event) {
	path.fullySelected = false;
	path.strokeColor = '#'+Math.floor(Math.random()*16777215).toString(16);
	
	// changes the solid stroke to a dashed stroke (dash length, space length)
		
		if (path.dashArray == null) {
			path.dashArray = [10, 12];
		} else {
             path.dashArray = null;
			} // changes the stoke to and from dashed with clicks

	length += 2;
	// increases the stroke length by 2 everytime it's clicked

}


var path2 = new Path.Rectangle({
	point: [75, 75],
	size: [75, 75],
	}); // creates a new shape

	path2.selected = false; // makes sure it starts out not selected

var path3 = new Path.Rectangle({
	point: [300, 300],
	size: [50, 50],
	}); // creates a new shape

var path4 = new Path.RegularPolygon(new Point(400, 100), 10, 50);
		// creates a new shape

var path5 = new Path.RegularPolygon(new Point(500, 400), 3, 50);
	   // creates a new shape

var copypath5 = path5.clone();
	copypath5.fillColor = null;
	// creates a new copy of a shape (.clone())

var swing = copypath5.bounds.bottomLeft;
	// sets the hinge point for the new shape

var path6 = new Path.RegularPolygon(new Point(100, 500), 6, 50);
		// creates a new shape

var path7 = new Path.Circle(new Point(1000, 600), 60);
        // creates a new shape

function onFrame(event) {
	
	path2.rotate(.5);
	path3.rotate(1);
	path4.rotate(2);
	path5.rotate(3);
	path6.rotate(4);
	copypath5.rotate(2, swing);

	// each frame, rotate the path by .5 to 4 degrees:

	var vector = moving - path3.position;
	path3.position += vector / 30;
	 if (vector.length < 5) {
	 	moving = Point.random() * view.size;
	 }

	 // sets random moving rectangle 
}
 
 function onKeyDown(event) {
	if(event.key == 'space') {
		if(path2.selected == false) {
		
		path2.selected = true;
		path4.selected = true;
		path5.selected = true;
		copypath5.strokeColor = 'black';
		path6.selected = true;
		path7.selected = true;
		
				
				} else {

		path2.selected = false;
		path4.selected = false;
		path5.selected = false;
		copypath5.strokeColor = null;
		path6.selected = false;
		path7.selected = false;

			} // selects shapes with a hit of the spacebar

	} else if (event.key == 'command') {
			if (path2.fillColor == null) {

    	path2.fillColor = '#'+Math.floor(Math.random()*16777215).toString(16);
		path4.fillColor = '#'+Math.floor(Math.random()*16777215).toString(16);
		path5.fillColor = '#'+Math.floor(Math.random()*16777215).toString(16);
		path6.fillColor = '#'+Math.floor(Math.random()*16777215).toString(16);
		path7.fillColor = '#'+Math.floor(Math.random()*16777215).toString(16);

			} else {

		path2.fillColor = null;
		path4.fillColor = null;
		path5.fillColor = null;
		path6.fillColor = null;
		path7.fillColor = null;

			} // fills shapes with colors (randomly) with the command key


	} else if (event.key == 'option') {
				if (path3.fillColor == null) {
		 
			path3.fillColor = '#'+Math.floor(Math.random()*16777215).toString(16);

					} else {

			path3.fillColor = null;
		}
				// fills the randomly moving rectangle with color (randomly)
   }
}

var moving = Point.random() * view.size;
// randomly sets a new point for the rectangle to go to 


function onResize(event) {
	// Whenever the window is resized, recenter the path:
	path.position = view.center;
}
	
</script>
</head>
<body>
	<canvas id="myCanvas" resize></canvas>
	<!-- width="100" height="100" -->
</body>
</html>